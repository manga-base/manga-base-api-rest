-- phpMyAdmin SQL Dump
-- version 5.1.0
-- https://www.phpmyadmin.net/
--
-- Servidor: 127.0.0.1
-- Tiempo de generación: 26-05-2021 a las 08:50:23
-- Versión del servidor: 10.4.18-MariaDB
-- Versión de PHP: 7.3.27

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de datos: `mangabase`
--

DELIMITER $$
--
-- Procedimientos
--
CREATE DEFINER=`root`@`localhost` PROCEDURE `estadisticas_usuario` (IN `idUsuario` INT, OUT `estadisticas` JSON)  BEGIN
SET
  @totalCapitulosLeidos = JSON_OBJECT(
    'totalCapitulosLeidos',
    (
      SELECT
        SUM(capitulos)
      FROM
        manga_usuario
      WHERE
        manga_usuario.idUsuario = idUsuario
    )
  );

SET
  @totalVolumenesLeidos = JSON_OBJECT(
    'totalVolumenesLeidos',
    (
      SELECT
        SUM(volumenes)
      FROM
        manga_usuario
      WHERE
        manga_usuario.idUsuario = idUsuario
    )
  );

SET
  @totalMangas = JSON_OBJECT(
    'totalMangas',
    (
      SELECT
        COUNT(idManga)
      FROM
        manga_usuario
      WHERE
        manga_usuario.idUsuario = idUsuario
    )
  );

SET
  @totalMangasPorLeer = JSON_OBJECT(
    'totalMangasPorLeer',
    (
      SELECT
        COUNT(idManga)
      FROM
        manga_usuario
      WHERE
        manga_usuario.idUsuario = idUsuario
        AND manga_usuario.idEstado = 3
    )
  );

SET
  @avgNota = JSON_OBJECT(
    'avgNota',
    (
      SELECT
        ROUND(AVG(nota), 2)
      FROM
        manga_usuario
      WHERE
        manga_usuario.idUsuario = idUsuario
        AND manga_usuario.nota IS NOT NULL
    )
  );

SET
  @porEstado = "";

SELECT
  CONCAT(
    "{\"porEstado\": [",
    GROUP_CONCAT(
      JSON_OBJECT(
        'id',
        id,
        'label',
        label,
        'value',
        count_value
      ) SEPARATOR ', '
    ),
    "]}"
  ) INTO @porEstado
FROM
  (
    SELECT
      manga_usuario.idEstado id,
      estado_manga_usuario.estado label,
      COUNT(*) count_value
    FROM
      manga_usuario
      INNER JOIN estado_manga_usuario ON manga_usuario.idEstado = estado_manga_usuario.idEstado
    WHERE
      manga_usuario.idUsuario = idUsuario
    GROUP BY
      manga_usuario.idEstado
  ) a;

SET
  @lastMangaEntries = "";

SELECT
  CONCAT(
    "{\"lastMangaEntries\": [",
    GROUP_CONCAT(my_json),
    "]}"
  ) INTO @lastMangaEntries
FROM
  (
    SELECT
      JSON_OBJECT(
        "id",
        manga.id,
        "tituloPreferido",
        manga.tituloPreferido,
        "foto",
        manga.foto,
        "totalCapitulosManga",
        manga.capitulos,
        "totalVolumenesManga",
        manga.volumenes,
        "idEstado",
        estado_manga_usuario.idEstado,
        "estado",
        estado_manga_usuario.estado,
        "nota",
        manga_usuario.nota,
        "volumenes",
        manga_usuario.volumenes,
        "capitulos",
        manga_usuario.capitulos,
        "updated_at",
        manga_usuario.updated_at
      ) my_json
    FROM
      manga_usuario
      INNER JOIN estado_manga_usuario ON manga_usuario.idEstado = estado_manga_usuario.idEstado
      INNER JOIN manga ON manga_usuario.idManga = manga.id
    WHERE
      manga_usuario.idUsuario = idUsuario
    ORDER BY
      manga_usuario.updated_at DESC
    LIMIT
      3
  ) a;

SET
  @calendar = "";

SELECT
  CONCAT(
    "{\"calendar\": [",
    GROUP_CONCAT(
      JSON_OBJECT("day", DAY, "value", count_value)
    ),
    "]}"
  ) INTO @calendar
FROM
  (
    SELECT
      DATE(updated_at) DAY,
      COUNT(*) count_value
    FROM
      actividad_usuario
    WHERE
      actividad_usuario.idUsuario = idUsuario
    GROUP BY
      DATE(updated_at)
  ) a;

SELECT
  JSON_MERGE(
    @totalCapitulosLeidos,
    @totalVolumenesLeidos,
    @totalMangas,
    @totalMangasPorLeer,
    @avgNota,
    @porEstado,
    @lastMangaEntries,
    @calendar
  ) INTO estadisticas;

END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `filtros_biblioteca` (OUT `filtros` JSON)  BEGIN
SET
    @estados = (
        SELECT
            CONCAT(
                '{"estados": [',
                GROUP_CONCAT(CONCAT('"', `estado`, '"')),
                "]}"
            )
        FROM
            `estado`
    );

SET
    @demografias = (
        SELECT
            CONCAT(
                '{"demografias": [',
                GROUP_CONCAT(CONCAT('"', `demografia`, '"')),
                "]}"
            )
        FROM
            `demografia`
    );

SET
    @autores = (
        SELECT
            CONCAT(
                '{"autores": [',
                GROUP_CONCAT(CONCAT('"', `nombre`, '"')),
                "]}"
            )
        FROM
            `autor`
    );

SET
    @revistas = (
        SELECT
    CONCAT(
        '{"revistas": [',
        GROUP_CONCAT(
            CONCAT(
                '"',
                `revista`.`nombre`,
                ' - ',
                `editorial`.`nombre`,
                '"'
            )
        ),
        "]}"
    )
FROM
    `revista`
INNER JOIN `editorial` ON `revista`.`idEditorial` = `editorial`.`idEditorial`
    );

SET
    @generos = (
        SELECT
            CONCAT(
                '{"generos": [',
                GROUP_CONCAT(CONCAT('"', `genero`, '"')),
                "]}"
            )
        FROM
            `genero`
    );

SELECT
    JSON_MERGE(
        @estados,
        @demografias,
        @autores,
        @revistas,
        @generos
    ) INTO filtros;

END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `info_manga` (IN `idManga` INT, OUT `info` JSON)  BEGIN
SET
    @autores_manga = (
        SELECT
            CONCAT(
                '{"autores": [',
                GROUP_CONCAT(CONCAT('"', `autor`.`nombre`, '"')),
                "]}"
            )
        FROM
            `manga_autor` NATURAL
            JOIN `autor`
        WHERE
            `manga_autor`.`idManga` = idManga
    );

SET
    @revistas_manga = (
        SELECT
            CONCAT(
                '{"revistas": [',
                GROUP_CONCAT(CONCAT('"', `revista`.`nombre`,' - ', `editorial`.`nombre`, '"')),
                "]}"
            )
        FROM
            `manga_revista` NATURAL
            JOIN `revista`
            INNER JOIN `editorial` ON `revista`.`idEditorial` = `editorial`.`idEditorial`
        WHERE
            `manga_revista`.`idManga` = idManga
    );

SET
    @generos_manga = (
        SELECT
            CONCAT(
                '{"generos": [',
                GROUP_CONCAT(CONCAT('"', `genero`.`genero`, '"')),
                "]}"
            )
        FROM
            `manga_genero` NATURAL
            JOIN `genero`
        WHERE
            `manga_genero`.`idManga` = idManga
    );

SELECT
    JSON_MERGE(@autores_manga, @revistas_manga, @generos_manga) INTO info;

END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `actividad_usuario`
--

CREATE TABLE `actividad_usuario` (
  `id` int(11) NOT NULL,
  `idUsuario` int(11) DEFAULT NULL,
  `tipo` enum('INSERT','UPDATE','DELETE') NOT NULL,
  `origen` enum('amistades','comentario','manga_usuario','puntuacion_comentario') NOT NULL,
  `idOrigen` int(11) NOT NULL,
  `accion` varchar(300) DEFAULT NULL,
  `anterior_valor` varchar(300) DEFAULT NULL,
  `nuevo_valor` varchar(300) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Volcado de datos para la tabla `actividad_usuario`
--

INSERT INTO `actividad_usuario` (`id`, `idUsuario`, `tipo`, `origen`, `idOrigen`, `accion`, `anterior_valor`, `nuevo_valor`, `created_at`, `updated_at`) VALUES
(4, 3, 'INSERT', 'amistades', 11, 'Solicitud nueva a usuario 2', NULL, NULL, '2021-05-21 16:03:40', '2021-05-21 16:03:40'),
(5, 3, 'UPDATE', 'amistades', 11, 'Solicitud de amistad editada', 'pendiente', 'rechazada', '2021-05-21 16:03:55', '2021-05-21 16:03:55'),
(6, 3, 'DELETE', 'amistades', 11, 'Solicitud eliminada', NULL, NULL, '2021-05-21 16:03:59', '2021-05-21 16:03:59'),
(7, 30, 'INSERT', 'comentario', 47, 'Comentario nuevo', NULL, NULL, '2021-05-19 16:10:00', '2021-05-21 19:38:56'),
(8, 30, 'UPDATE', 'comentario', 47, 'Comentario editado', 'Nuevo comentario', 'Comentario editado', '2021-05-27 16:10:11', '2021-05-21 19:39:36'),
(9, 30, 'DELETE', 'comentario', 47, 'Comentario eliminado', NULL, NULL, '2021-05-21 16:10:14', '2021-05-10 16:10:14'),
(10, 28, 'INSERT', 'manga_usuario', 28, 'Manga añadido a la lista', NULL, NULL, '2021-05-21 16:22:26', '2021-05-21 16:22:26'),
(11, 28, 'UPDATE', 'manga_usuario', 28, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 1, \"volumenes\": 12, \"capitulos\": 32}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 1, \"volumenes\": 13, \"capitulos\": 32}', '2021-05-21 16:23:19', '2021-05-21 16:23:19'),
(12, 28, 'DELETE', 'manga_usuario', 28, 'Manga eliminado de la lista', NULL, NULL, '2021-05-21 16:24:37', '2021-05-21 16:24:37'),
(13, 30, 'INSERT', 'puntuacion_comentario', 39, 'Puntuación a comentario nueva', NULL, NULL, '2021-05-21 16:29:33', '2021-05-21 16:29:33'),
(14, 30, 'UPDATE', 'puntuacion_comentario', 39, 'Puntuación a comentario editada', 'positivo', 'negativo', '2021-05-21 16:29:36', '2021-05-21 16:29:36'),
(15, 30, 'DELETE', 'comentario', 39, 'Puntuación a comentario eliminada', NULL, NULL, '2021-05-21 16:29:38', '2021-05-21 16:29:38'),
(16, 30, 'DELETE', 'comentario', 46, 'Comentario eliminado', NULL, NULL, '2021-05-21 23:36:01', '2021-05-21 23:36:01'),
(17, 30, 'UPDATE', 'puntuacion_comentario', 33, 'Puntuación a comentario editada', 'negativo', 'positivo', '2021-05-25 18:44:18', '2021-05-25 18:44:18'),
(18, 30, 'INSERT', 'comentario', 48, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:17:33', '2021-05-25 19:17:33'),
(19, 30, 'INSERT', 'comentario', 49, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:18:20', '2021-05-25 19:18:20'),
(20, 30, 'INSERT', 'comentario', 50, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:18:53', '2021-05-25 19:18:53'),
(21, 30, 'INSERT', 'comentario', 51, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:20:30', '2021-05-25 19:20:30'),
(22, 30, 'INSERT', 'comentario', 52, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:20:47', '2021-05-25 19:20:47'),
(23, 30, 'INSERT', 'puntuacion_comentario', 40, 'Puntuación a comentario nueva', NULL, NULL, '2021-05-25 19:21:02', '2021-05-25 19:21:02'),
(24, 30, 'INSERT', 'comentario', 53, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:21:08', '2021-05-25 19:21:08'),
(25, 30, 'DELETE', 'comentario', 53, 'Comentario eliminado', NULL, NULL, '2021-05-25 19:21:17', '2021-05-25 19:21:17'),
(26, 30, 'DELETE', 'comentario', 50, 'Comentario eliminado', NULL, NULL, '2021-05-25 19:21:51', '2021-05-25 19:21:51'),
(27, 30, 'INSERT', 'comentario', 54, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:22:30', '2021-05-25 19:22:30'),
(28, 30, 'INSERT', 'comentario', 55, 'Comentario nuevo', NULL, NULL, '2021-05-25 19:26:17', '2021-05-25 19:26:17'),
(29, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 10, \"idEstado\": 1, \"volumenes\": 40, \"capitulos\": 2}', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 3, \"volumenes\": 40, \"capitulos\": 5}', '2021-05-25 23:16:21', '2021-05-25 23:16:21'),
(30, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 3, \"volumenes\": 40, \"capitulos\": 5}', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 5}', '2021-05-25 23:19:13', '2021-05-25 23:19:13'),
(31, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 5}', '{\"favorito\": 41, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:22:25', '2021-05-25 23:22:25'),
(32, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 41, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:23:38', '2021-05-25 23:23:38'),
(33, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:23:52', '2021-05-25 23:23:52'),
(34, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:24:07', '2021-05-25 23:24:07'),
(35, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:26:01', '2021-05-25 23:26:01'),
(36, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 40, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:28:40', '2021-05-25 23:28:40'),
(37, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:28:59', '2021-05-25 23:28:59'),
(38, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:29:16', '2021-05-25 23:29:16'),
(39, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:30:20', '2021-05-25 23:30:20'),
(40, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:31:00', '2021-05-25 23:31:00'),
(41, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:31:10', '2021-05-25 23:31:10'),
(42, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:31:30', '2021-05-25 23:31:30'),
(43, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:31:35', '2021-05-25 23:31:35'),
(44, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:31:41', '2021-05-25 23:31:41'),
(45, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 5, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 1, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:31:46', '2021-05-25 23:31:46'),
(46, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 1, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 1, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:33:33', '2021-05-25 23:33:33'),
(47, 30, 'UPDATE', 'manga_usuario', 1, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 3, \"idEstado\": 1, \"volumenes\": 40, \"capitulos\": 363}', '{\"favorito\": 0, \"nota\": 3, \"idEstado\": 1, \"volumenes\": 40, \"capitulos\": 363}', '2021-05-25 23:33:37', '2021-05-25 23:33:37'),
(48, 30, 'DELETE', 'manga_usuario', 12, 'Manga eliminado de la lista', NULL, NULL, '2021-05-25 23:34:33', '2021-05-25 23:34:33'),
(49, 30, 'INSERT', 'manga_usuario', 30, 'Manga añadido a la lista', NULL, NULL, '2021-05-25 23:48:02', '2021-05-25 23:48:02'),
(50, 30, 'UPDATE', 'manga_usuario', 30, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 4, \"idEstado\": 2, \"volumenes\": null, \"capitulos\": null}', '{\"favorito\": 1, \"nota\": 4, \"idEstado\": 2, \"volumenes\": 0, \"capitulos\": 0}', '2021-05-25 23:49:59', '2021-05-25 23:49:59'),
(51, 30, 'UPDATE', 'manga_usuario', 30, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 4, \"idEstado\": 2, \"volumenes\": 0, \"capitulos\": 0}', '{\"favorito\": 0, \"nota\": 4, \"idEstado\": 2, \"volumenes\": 0, \"capitulos\": 0}', '2021-05-25 23:50:48', '2021-05-25 23:50:48'),
(52, 30, 'UPDATE', 'manga_usuario', 30, 'Manga de la lista editado', '{\"favorito\": 0, \"nota\": 4, \"idEstado\": 2, \"volumenes\": 0, \"capitulos\": 0}', '{\"favorito\": 1, \"nota\": 4, \"idEstado\": 2, \"volumenes\": 0, \"capitulos\": 0}', '2021-05-25 23:53:09', '2021-05-25 23:53:09'),
(53, 30, 'UPDATE', 'manga_usuario', 30, 'Manga de la lista editado', '{\"favorito\": 1, \"nota\": 4, \"idEstado\": 2, \"volumenes\": 0, \"capitulos\": 0}', '{\"favorito\": 0, \"nota\": 4, \"idEstado\": 2, \"volumenes\": 0, \"capitulos\": 0}', '2021-05-25 23:53:29', '2021-05-25 23:53:29');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `amistades`
--

CREATE TABLE `amistades` (
  `id` int(11) NOT NULL,
  `idUsuario` int(11) NOT NULL,
  `idAmigo` int(11) NOT NULL,
  `estado` enum('pendiente','aceptada','rechazada','bloqueada') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'pendiente',
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `amistades`
--

INSERT INTO `amistades` (`id`, `idUsuario`, `idAmigo`, `estado`, `created_at`, `updated_at`) VALUES
(1, 33, 31, 'pendiente', '2021-05-09 16:47:07', '2021-05-09 16:47:07'),
(2, 1, 2, 'pendiente', '2021-05-09 16:48:57', '2021-05-09 16:48:57'),
(4, 3, 4, 'pendiente', '2021-05-09 17:42:31', '2021-05-09 17:42:31'),
(5, 4, 5, 'pendiente', '2021-05-09 17:46:20', '2021-05-09 17:46:20'),
(6, 30, 5, 'aceptada', '2021-05-09 17:54:42', '2021-05-10 00:12:38'),
(8, 1, 30, 'aceptada', '2021-05-09 18:11:27', '2021-05-09 18:28:24'),
(9, 30, 2, 'aceptada', '2021-05-09 23:43:50', '2021-05-09 23:44:02');

--
-- Disparadores `amistades`
--
DELIMITER $$
CREATE TRIGGER `DELETE_amistades` AFTER DELETE ON `amistades` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    OLD.idUsuario,
    'DELETE',
    'amistades',
    OLD.id,
    'Solicitud eliminada'
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `INSERT_amistades` AFTER INSERT ON `amistades` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    NEW.idUsuario,
    'INSERT',
    'amistades',
    NEW.id,
    CONCAT(
        'Solicitud de amistad a usuario ',
        NEW.idAmigo
    )
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `UPDATE_amistades` AFTER UPDATE ON `amistades` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion,
        anterior_valor,
        nuevo_valor
    )
VALUES(
    NEW.idUsuario,
    'UPDATE',
    'amistades',
    NEW.id,
    'Solicitud de amistad editada',
    OLD.estado,
    NEW.estado
) ; END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `autor`
--

CREATE TABLE `autor` (
  `idAutor` int(11) NOT NULL,
  `nombre` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `link` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `autor`
--

INSERT INTO `autor` (`idAutor`, `nombre`, `link`) VALUES
(1, 'Kentaro Miura', 'https://es.wikipedia.org/wiki/Kentaro_Miura'),
(2, 'Hiromi Arakawa', 'https://es.wikipedia.org/wiki/Hiromu_Arakawa'),
(3, 'Eiichirō Oda', 'https://es.wikipedia.org/wiki/Eiichir%C5%8D_Oda'),
(4, 'Yasuhisa Hara', 'https://g.co/kgs/r3d47k'),
(5, 'Aka Akasaka', 'https://es.wikipedia.org/wiki/Aka_Akasaka'),
(6, 'Nobuhiro Watsuki', 'https://es.wikipedia.org/wiki/Nobuhiro_Watsuki'),
(7, 'Tatsuya Matsuki', NULL),
(8, 'Tite Kubo', 'https://es.wikipedia.org/wiki/Tite_Kubo'),
(9, 'Mitsutoshi Shimabukuro', 'https://es.wikipedia.org/wiki/Mitsutoshi_Shimabukuro'),
(10, 'Kaiu Shirai', 'https://es.wikipedia.org/wiki/Kaiu_Shirai'),
(11, 'Posuka Demizu', 'https://es.wikipedia.org/wiki/Posuka_Demizu'),
(12, 'Takumi Fukui', NULL),
(13, 'Shinya Umemura', NULL),
(14, 'Dr. Imu', NULL),
(15, 'Motoi Fuyukawa', NULL),
(16, 'Kazuma Kamachi', 'https://en.wikipedia.org/wiki/Kazuma_Kamachi'),
(17, 'Hajime Isayama', 'https://es.wikipedia.org/wiki/Hajime_Isayama'),
(18, 'Shiden Kanzaki', NULL),
(19, 'Hon Morino', NULL),
(20, 'Mari Okada', NULL),
(21, 'Mitsu Izumi', NULL),
(22, 'Koyoharu Gotōge', NULL),
(23, 'Yukito Ayatsuji', 'https://es.wikipedia.org/wiki/Yukito_Ayatsuji'),
(24, 'Yutaka Hara', NULL),
(25, 'Fujita', NULL),
(26, 'Atsushi Ōkubo', 'https://es.wikipedia.org/wiki/Atsushi_%C5%8Ckubo'),
(27, 'Io Sakisaka', 'https://es.wikipedia.org/wiki/Io_Sakisaka'),
(28, 'Aneko Yusagi', NULL),
(29, 'Yoshitoki Ōima', NULL),
(30, 'Takaya Kagami', NULL),
(31, 'Kei Ohkubo', NULL);

-- --------------------------------------------------------

--
-- Estructura Stand-in para la vista `base_mangas`
-- (Véase abajo para la vista actual)
--
CREATE TABLE `base_mangas` (
`id` int(11)
,`tituloPreferido` varchar(200)
,`tituloJA` varchar(200)
,`tituloRōmaji` varchar(200)
,`tituloES` varchar(200)
,`tituloEN` varchar(200)
,`foto` varchar(100)
,`argumento` varchar(1000)
,`añoDePublicacion` int(11)
,`añoDeFinalizacion` int(11)
,`capitulos` int(11)
,`volumenes` int(11)
,`nota` decimal(2,1)
,`estado` varchar(200)
,`demografia` varchar(200)
);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `comentario`
--

CREATE TABLE `comentario` (
  `id` int(11) NOT NULL,
  `idPadre` int(11) DEFAULT NULL,
  `idUsuario` int(11) DEFAULT NULL,
  `texto` text NOT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Volcado de datos para la tabla `comentario`
--

INSERT INTO `comentario` (`id`, `idPadre`, `idUsuario`, `texto`, `created_at`, `updated_at`) VALUES
(1, NULL, 30, 'Deja tus mamadas wey\nEditado hoy', '2021-05-16 20:10:48', '2021-05-19 15:46:25'),
(2, NULL, 3, 'Hii', '2021-05-17 19:36:41', '2021-05-17 19:36:41'),
(17, NULL, 30, 'New comment from Postman', '2021-05-19 16:45:30', '2021-05-19 16:45:30'),
(32, NULL, 30, 'Pues si\nSoy yo', '2021-05-19 22:36:23', '2021-05-19 22:36:44'),
(33, 1, 30, 'Pues si bien mamadas dx', '2021-05-19 23:51:05', '2021-05-21 14:43:30'),
(34, 1, 30, 'Vale we ya las dejo', '2021-05-20 20:20:48', '2021-05-20 20:20:48'),
(36, 34, 30, 'Pinche puto wey', '2021-05-20 22:47:17', '2021-05-20 22:47:17'),
(37, 34, 30, 'Plz work', '2021-05-20 22:50:01', '2021-05-20 22:50:01'),
(39, 33, 30, 'De locos \nx2', '2021-05-20 22:54:23', '2021-05-20 22:54:32'),
(40, NULL, 30, 'New comment', '2021-05-20 23:02:38', '2021-05-20 23:02:38'),
(43, 39, 30, 'Lo divertido', '2021-05-20 23:39:19', '2021-05-20 23:39:19'),
(45, NULL, 30, 'df', '2021-05-21 00:02:59', '2021-05-21 00:02:59'),
(48, NULL, 30, 'Vamos a ello', '2021-05-25 19:17:33', '2021-05-25 19:17:33'),
(49, NULL, 30, 'Ara si que si', '2021-05-25 19:18:20', '2021-05-25 19:18:20'),
(51, NULL, 30, 'aa pues si wey XD', '2021-05-25 19:20:30', '2021-05-25 19:20:30'),
(52, NULL, 30, 'A VER YA NO?', '2021-05-25 19:20:47', '2021-05-25 19:20:47'),
(54, NULL, 30, 'Primer comentari de One Piece', '2021-05-25 19:22:30', '2021-05-25 19:22:30'),
(55, NULL, 30, 'Prova comentari a Act Age', '2021-05-25 19:26:17', '2021-05-25 19:26:17');

--
-- Disparadores `comentario`
--
DELIMITER $$
CREATE TRIGGER `DELETE_comentario` AFTER DELETE ON `comentario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    OLD.idUsuario,
    'DELETE',
    'comentario',
    OLD.id,
    'Comentario eliminado'
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `INSERT_comentario` AFTER INSERT ON `comentario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    NEW.idUsuario,
    'INSERT',
    'comentario',
    NEW.id,
    'Comentario nuevo'
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `UPDATE_comentario` AFTER UPDATE ON `comentario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion,
        anterior_valor,
        nuevo_valor
    )
VALUES(
    NEW.idUsuario,
    'UPDATE',
    'comentario',
    NEW.id,
    'Comentario editado',
    OLD.texto,
    NEW.texto
) ; END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `comentario_manga`
--

CREATE TABLE `comentario_manga` (
  `id` int(11) NOT NULL,
  `idComentario` int(11) DEFAULT NULL,
  `idManga` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Volcado de datos para la tabla `comentario_manga`
--

INSERT INTO `comentario_manga` (`id`, `idComentario`, `idManga`, `created_at`, `updated_at`) VALUES
(1, 17, 1, '2021-05-25 18:22:16', '2021-05-25 18:22:16'),
(2, 39, 16, '2021-05-25 18:29:14', '2021-05-25 18:29:14'),
(3, 45, 1, '2021-05-25 18:30:46', '2021-05-25 18:30:46'),
(5, 52, 1, '2021-05-25 19:20:47', '2021-05-25 19:20:47'),
(6, 54, 3, '2021-05-25 19:22:30', '2021-05-25 19:22:30'),
(7, 55, 7, '2021-05-25 19:26:17', '2021-05-25 19:26:17');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `comentario_usuario`
--

CREATE TABLE `comentario_usuario` (
  `id` int(11) NOT NULL,
  `idComentario` int(11) DEFAULT NULL,
  `idUsuario` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Volcado de datos para la tabla `comentario_usuario`
--

INSERT INTO `comentario_usuario` (`id`, `idComentario`, `idUsuario`, `created_at`, `updated_at`) VALUES
(1, 1, 35, '2021-05-16 20:11:13', '2021-05-16 20:11:13');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `demografia`
--

CREATE TABLE `demografia` (
  `idDemografia` int(11) NOT NULL,
  `demografia` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `descripcion` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `demografia`
--

INSERT INTO `demografia` (`idDemografia`, `demografia`, `descripcion`) VALUES
(1, 'Josei', 'Manga dirigido a mujeres jóvenes y adultas.'),
(2, 'Kodomo', 'Manga dirigido a niños pequeños.'),
(3, 'Seinen', 'Manga dirigido a hombres jóvenes y adultos.'),
(4, 'Shōjo', 'Manga dirigido a chicas adolescentes.'),
(5, 'Shōnen', 'Manga dirigido a chicos adolescentes.');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `editorial`
--

CREATE TABLE `editorial` (
  `idEditorial` int(11) NOT NULL,
  `nombre` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `link` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `editorial`
--

INSERT INTO `editorial` (`idEditorial`, `nombre`, `link`) VALUES
(1, 'Hakusensha', 'https://es.wikipedia.org/wiki/Hakusensha'),
(2, 'Square Enix', 'https://es.wikipedia.org/wiki/Square_Enix'),
(3, 'Shūeisha', 'https://es.wikipedia.org/wiki/Sh%C5%ABeisha'),
(4, 'Tokuma Shoten', 'https://es.wikipedia.org/wiki/Tokuma_Shoten'),
(5, 'ASCII Media Works', 'https://es.wikipedia.org/wiki/ASCII_Media_Works'),
(6, 'Kōdansha', 'https://es.wikipedia.org/wiki/K%C5%8Ddansha'),
(7, 'Kadokawa Shōten', 'https://es.wikipedia.org/wiki/Kadokawa_Sh%C5%8Dten'),
(8, 'Poplar', 'https://ja.wikipedia.org/wiki/%E3%83%9D%E3%83%97%E3%83%A9%E7%A4%BE'),
(9, 'Ichijinsha', 'https://es.wikipedia.org/wiki/Ichijinsha'),
(10, 'Media Factory', 'https://es.wikipedia.org/wiki/Media_Factory');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `estado`
--

CREATE TABLE `estado` (
  `idEstado` int(11) NOT NULL,
  `estado` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `descripcion` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `estado`
--

INSERT INTO `estado` (`idEstado`, `estado`, `descripcion`) VALUES
(1, 'En publicación', 'El manga está actualmente publicándose.'),
(2, 'Finalizado', 'El manga está finalizado.'),
(3, 'Interrumpido', 'El manga ha sido interrumpido.');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `estado_manga_usuario`
--

CREATE TABLE `estado_manga_usuario` (
  `idEstado` int(11) NOT NULL,
  `estado` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `descripcion` varchar(500) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `estado_manga_usuario`
--

INSERT INTO `estado_manga_usuario` (`idEstado`, `estado`, `descripcion`) VALUES
(1, 'Leyendo', 'Para los mangas que estás leyendo actualmente.'),
(2, 'Leído', 'Para los mangas que están acabados de publicar y además has acabado de leer completamente.'),
(3, 'Pendiente', 'Para los mangas que tienes pensado leer.'),
(4, 'En espera', 'Para los mangas que has empezado a leer pero por alguna razón has dejado de leer, pero no quieres abandonarlo.'),
(5, 'Abandonado', 'Para los mangas que has empezado a leer pero no te han gustado.');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `genero`
--

CREATE TABLE `genero` (
  `idGenero` int(11) NOT NULL,
  `genero` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `descripcion` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `genero`
--

INSERT INTO `genero` (`idGenero`, `genero`, `descripcion`) VALUES
(1, 'Acción', 'Se juega principalmente a través de un choque de fuerzas físicas. Con frecuencia, estas historias tienen cortes rápidos, personajes duros que toman decisiones rápidas y, por lo general, una chica hermosa cerca. Cualquier cosa rápida y probablemente una historia delgada.'),
(2, 'Fantasía oscura', 'La fantasía oscura es un subgénero de la ficción fantástica que puede referirse a obras literarias, cinematográficas y artísticas en general que combinan la fantasía con elementos de terror. A grandes rasgos, la expresión puede utilizarse para referirse a las obras fantásticas que exhiben una atmósfera oscura o sombría, o que transmiten una sensación de horror y espanto.'),
(3, 'Tragedia', 'Presenta terribles conflictos entre personajes de alta alcurnia –reyes, héroes- que son víctimas de terribles pasiones que les llevan a la destrucción y a la muerte.'),
(4, 'Aventura', 'Exploración de nuevos lugares, entornos o situaciones. Esto a menudo se asocia con personas en viajes largos a lugares lejanos que se encuentran con cosas asombrosas, generalmente no de una manera épica, sino de una manera apasionante e interesante.'),
(5, 'Demonios', 'Manga que se desarrolla en un mundo donde los demonios y otras criaturas oscuras juegan un papel importante; el personaje principal puede incluso ser uno.'),
(6, 'Drama', 'Manga que a menudo muestra la vida o los personajes a través de conflictos y emociones. En general, las diferentes partes de la historia tienden a formar un todo que es mayor que la suma de las partes. En otras palabras, la historia tiene un mensaje que va más allá de la trama misma.'),
(7, 'Horror', 'Manga cuyo objetivo es asustar a la audiencia.'),
(8, 'Sobrenatural', 'Manga de estatura paranormal. Demonios, vampiros, fantasmas, muertos vivientes, etc.'),
(9, 'Militar', 'Manga que tiene una fuerte sensación militarista detrás.'),
(10, 'Psicológico', 'A menudo, cuando dos o más personajes se aprovechan de las mentes de los demás, ya sea jugando juegos engañosos con el otro o simplemente tratando de demoler el estado mental del otro.'),
(11, 'Fantasía', 'Manga que se desarrolla en un mundo mítico bastante diferente al de la Tierra actual. Con frecuencia este mundo tiene criaturas mágicas y / o míticas como dragones y unicornios. Estas historias a veces se basan en leyendas y mitos del mundo real. Con frecuencia, las fantasías describen cuentos con magia, valientes caballeros, damiselas en peligro y / o misiones.'),
(12, 'Comedia', 'Múltiples personajes y / o eventos que causan resultados divertidos. Estas historias se basan en personajes, situaciones y eventos divertidos.'),
(13, 'Ciencia ficción', 'Donde el escenario se basa en la tecnología y las herramientas de un mundo científicamente imaginable. La mayoría de las tecnologías presentadas no están disponibles en la actualidad y, por tanto, la ciencia es ficción. Esto incorpora cualquier lugar posible (planetas, espacio, bajo el agua, lo que sea).'),
(14, 'Superpoderes', 'Mangas cuyos personajes principales tienen poderes más allá de los humanos normales. A menudo parece magia, pero en realidad no puede considerarse magia; generalmente ki-ataques, fuerza voladora o sobrehumana.'),
(15, 'Histórico', 'Manga cuyo escenario está en el pasado. Con frecuencia, estos siguen relatos, sagas o hechos históricos.'),
(16, 'Escolar', 'Manga que se desarrolla principalmente en un entorno escolar.'),
(17, 'Comedia romántica', 'Dos personas se conocen, bromean entre ellas, pero a pesar de la atracción obvia para la audiencia no se ven románticamente involucrados por algún tipo de factor interno (exteriormente ellos no se gustan mutuamente) o por una barrera externa (uno de ellos tiene una relación amorosa con otra persona, por ejemplo).'),
(18, 'Romance', 'Manga cuya historia trata sobre dos personas que quieren [a veces inconscientemente] ganar o mantener el amor del otro. Este tipo de anime también podría caer en la categoría \"Ecchi\", mientras que \"Romance\" y \"Hentai\" generalmente se contradicen entre sí.'),
(19, 'Artes Marciales', 'El tema central gira en torno a las artes marciales. Esto incluye todos los estilos de lucha cuerpo a cuerpo, incluidos Karate, Tae-Kwon-Do e incluso Boxeo. El uso de armas, como Nunchaku y Shuriken, también son indicios de este género. Este es un subgénero de acción.'),
(20, 'Samurai', 'Manga cuyos personajes principales son samuráis, el antiguo, pero no olvidado, elenco de guerreros del Japón medieval.'),
(21, 'Recuentos de la vida', 'Manga sin una trama central clara. Este tipo de manga tiende a ser naturalista y se centra principalmente en los personajes principales y su vida cotidiana. A menudo habrá algunas perspectivas filosóficas con respecto al amor, las relaciones, la vida, etc. vinculadas al anime. Los estados de ánimo generales típicos de este tipo de anime son alegres y despreocupados, en otras palabras, es tu tipo de anime para \"sentirse bien\".'),
(23, 'Misterio', 'Manga donde los personajes revelan secretos que pueden conducir a la solución de un gran misterio. Esto no es necesariamente resolver un crimen, pero puede ser una realización después de una búsqueda.'),
(24, 'Suspenso psicológico', 'Es un subgénero de suspenso que generalmente tiene como tema central un enfrentamiento (o juego) entre los personajes, más mental (o psicológico) que físico, en el que la inteligencia o los aspectos intelectuales o mentales tienen una gran importancia.'),
(25, 'Apocalíptico', 'Manga que se centra en un mundo apocalíptico, muchas veces con referencias religiosas'),
(26, 'Música', 'Manga cuyo tema central gira en torno a cantantes / ídolos o personas que tocan instrumentos. Esta categoría no está destinada a buscar AMV (videos musicales animados).'),
(27, 'Distopía', 'Las sociedades distópicas aparecen en muchos subgéneros de ficción y a menudo se utilizan para llamar la atención sobre la sociedad, el medio ambiente, la política y la economía, religión, psicología, ética, ciencia o tecnología. '),
(28, 'Postapocalíptico', 'Estas son historias que relatan la historia de un mundo DESPUÉS que sucede un evento apocalíptico. Los personajes ya conocen las reglas del mundo, entienden qué deben hacer para sobrevivir y, de cierta forma, ya están acostumbrados al estado actual del mundo.'),
(30, 'Isekai', 'Isekai (異世界 lit. «mundo diferente») es una temática típica de novelas ligeras, manga y anime de fantasía japonesa, que giran en torno a una persona normal de la Tierra que es transportada, renacida o atrapada en un universo paralelo o un mundo de fantasía.'),
(31, 'Vampiros', 'Manga cuyos personajes principales son vampiros o al menos vampiros juegan un papel importante en la historia.');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `manga`
--

CREATE TABLE `manga` (
  `id` int(11) NOT NULL,
  `tituloPreferido` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `tituloJA` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `tituloRōmaji` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `tituloES` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  `tituloEN` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  `foto` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'noFoto.png',
  `argumento` varchar(1000) COLLATE utf8_unicode_ci NOT NULL,
  `añoDePublicacion` int(11) NOT NULL,
  `añoDeFinalizacion` int(11) DEFAULT NULL,
  `capitulos` int(11) DEFAULT NULL,
  `volumenes` int(11) DEFAULT NULL,
  `nota` decimal(2,1) NOT NULL,
  `idEstado` int(11) NOT NULL,
  `idDemografia` int(11) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `manga`
--

INSERT INTO `manga` (`id`, `tituloPreferido`, `tituloJA`, `tituloRōmaji`, `tituloES`, `tituloEN`, `foto`, `argumento`, `añoDePublicacion`, `añoDeFinalizacion`, `capitulos`, `volumenes`, `nota`, `idEstado`, `idDemografia`, `created_at`, `updated_at`) VALUES
(1, 'Berserk', 'ベルセルク', 'Berserk', 'Berserk', NULL, 'berserk.png', 'La historia está ambientada en una época con tintes de la Europa medieval y renacentista, en la cual se cuenta la vida de Guts (cuyo nombre fue traducido como Gatsu en las primeras ediciones en castellano), un mercenario huérfano que acompañado del elfo Puck, caza seres demoníacos llamados apóstoles. La historia se divide en dos partes: la primera (que va del volumen 4 al volumen 13) relata su niñez y juventud hasta cómo conoce a Griffith, líder de un grupo mercenario llamado la «Banda del Halcón». La segunda parte (volúmenes del 1 al 3 y 14 al 39, publicándose) muestra su historia tras el fatídico Eclipse, la caza de los apóstoles y su búsqueda de venganza contra Griffith.', 1989, NULL, 363, 41, '4.8', 1, 3, '2021-05-06 15:32:01', '2021-05-24 20:06:56'),
(2, 'Fullmetal Alchemist', '鋼の錬金術師', 'Hagane no Renkinjutsushi', 'El alquimista de acero', 'Full Metal Alchemist', 'fullmetal_alchemist.jpg', 'La historia se centra en los hermanos Edward y Alphonse Elric, quienes viven en un pequeño pueblo de un país ficticio llamado Amestris.​ Su padre, Hohenheim, se había marchado de su casa cuando aún eran pequeños y años más tarde su madre, Trisha Elric, muere por una enfermedad terminal, dejando a los hermanos Elric solos. Después de la muerte de su madre, Edward decide resucitarla a través de la alquimia,​ una de las técnicas científicas más avanzadas conocidas por el hombre. Sin embargo, el intento resulta fallido y como consecuencia Edward pierde su pierna izquierda, y Alphonse su cuerpo. En un esfuerzo por salvar a su hermano, Edward sacrifica su brazo derecho para sellar el alma de Alphonse en una armadura. Tras esto, un alquimista llamado Roy Mustang visita a los hermanos Elric y le propone a Edward convertirse en un miembro de las Fuerzas Armadas del Estado y así encontrar una forma de recuperar sus cuerpos. Posteriormente la pierna izquierda y el brazo derecho de Edward son sust', 2001, 2010, 116, 27, '4.6', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:08:40'),
(3, 'One Piece', 'ワンピース', 'Wan Pīsu', 'One Piece', NULL, 'one_piece.png', 'Gol D. Roger, un hombre conocido como el \"Rey de los Piratas\", será ejecutado por el Gobierno Mundial. Pero justo antes de su desaparición, confirma la existencia de un gran tesoro, One Piece, ubicado en algún lugar dentro del vasto océano conocido como Grand Line. Al anunciar que One Piece puede ser reclamado por cualquiera lo suficientemente digno como para alcanzarlo, el Rey Pirata es ejecutado y comienza la Gran Era de los Piratas.\r\n\r\nVeintidós años después, un joven llamado Monkey D. Luffy está listo para embarcarse en su propia aventura, buscando One Piece y luchando por convertirse en el nuevo Rey de los Piratas. Armado con solo un sombrero de paja, un bote pequeño y un cuerpo elástico, emprende un viaje fantástico para reunir a su propia tripulación y un barco digno que los llevará a través de Grand Line para reclamar el mayor estatus en alta mar.', 1997, NULL, NULL, 96, '4.5', 1, 5, '2021-05-06 15:32:01', '2021-05-24 20:06:59'),
(4, 'Kingdom ', 'キングダム', 'Kingudamu', 'Kingdom', NULL, 'kingdom.jpg', 'Nacidos en el período de los Reinos Combatientes de la antigua China, Xin y Piao son huérfanos de guerra en el reino de Qin que sueñan con convertirse en \"Grandes Generales de los Cielos\" para salir de sus humildes puestos en la vida. Sin embargo, un día, Piao es llevado al palacio por un ministro para ser utilizado con un propósito desconocido, dejando a Xin solo como esclavo doméstico en una aldea campesina. Unos meses más tarde, Piao regresa a la aldea al borde de la muerte, instando a Xin a viajar a otra aldea. Allí conoce a un niño que se ve casi idéntico a Piao, Ying Zheng, el actual Rey de Qin. Xin se entera de que Piao sirvió como doble cuerpo para Ying Zheng, y fue mortalmente herido en una lucha de poder por el trono. Aunque inicialmente furioso con Ying Zheng por causar la muerte de Piao, Xin decide aprovechar la oportunidad y ayudar a Ying Zheng a derrotar a su hermano y recuperar el trono de Qin. Con éxito en este esfuerzo, Xin comienza oficialmente su vida como comandante', 2006, NULL, NULL, 60, '4.5', 1, 3, '2021-05-06 15:32:01', '2021-05-24 20:07:03'),
(5, 'Kaguya-sama wa Kokurasetai: Tensai-tachi no Ren\'ai Zunōsen', 'かぐや様は告らせたい ～天才たちの恋愛頭脳戦～', 'Kaguya-sama wa Kokurasetai: Tensai-tachi no Ren\'ai Zunōsen', 'Kaguya-sama quiere que se le confiesen: La guerra del amor y el intelecto entre dos genios', 'Kaguya-sama: Love is War', 'kaguya.jpg', 'El presidente del consejo estudiantil, Miyuki Shirogane, y la vicepresidenta Kaguya Shinomiya parecen ser la pareja perfecta. Kaguya es la hija de un rico conglomerado familiar, y Miyuki es el mejor alumno de la escuela y es bien conocido en toda la prefectura. Aunque se gustan, son muy orgullosos como para confesar su amor, ya que creen que quien lo haga primero estará por debajo de quien reciba la confesión. La historia sigue sus múltiples esquemas para hacer que el otro se confiese.', 2015, NULL, NULL, 20, '4.8', 1, 3, '2021-05-06 15:32:01', '2021-05-24 20:08:51'),
(6, 'Rurouni Kenshin\r\n', 'るろうに剣心 -明治剣客浪漫譚-', 'Rurōni Kenshin -Meiji Kenkaku Romantan-', 'Rurōuni Kenshin: Historia romántica de un espadachín —de la era— Meiji', 'Rurouni Kenshin: Meiji Swordsman Romantic Story', 'kenshin.jpg', 'Himura Kenshin es un experto samurái quien en un momento de su pasado (comprendidos entre sus 14 y 19 años) puso su habilidad al servicio de los Ishin Shishi (Patriotas de la Restauración) como hitokiri (Homicida, loco , destajador). Durante esta época recibió el nombre de Hitokiri Battōsai (Battōsai el Homicida o el destajador) y fue el asesino más famoso y temido de estos tiempos. Terminados los enfrentamientos, decide pasar al anonimato y desde entonces se convierte en un vagabundo que recorre el país ayudando a la gente como una forma de resarcirse por todas las vidas que tomó, jurando que nunca más volvería a tomar otra vida. Porta con él una sakabatō, katana donde el filo y el lado romo están invertidos y le permite utilizar su estilo de kenjutsu, el Hiten Mitsurugi Ryū, sin riesgo que el mismo sea mortal.', 1994, 1999, 259, 28, '4.4', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:08:56'),
(7, 'Act-Age', 'アクタージュ', 'Akutāju', 'Act-Age', NULL, 'act-age.jpg', 'La historia se centra en Kei Yonagi, una chica de secundaria que se esfuerza por convertirse en actriz. Ella está a cargo sus dos hermanos menores, después de que su padre los abandonó y su madre murió. Kei tiene un talento extremo para la actuación de método, hasta el punto de que pierde la noción de la realidad cuando actúa. En una audición, los productores especulan que actuar en esta intensidad podría ser autodestructivo, y citan esto como una razón para rechazarla. Sin embargo, Kei llama la atención del aclamado director Sumiji Kuroyama, quien da un paso adelante con la intención de sacar todo su potencial.', 2018, 2020, 125, 12, '4.1', 3, 5, '2021-05-06 15:32:01', '2021-05-24 20:07:16'),
(8, 'Bleach', 'ブリーチ', 'Burīchi', 'Bleach', NULL, 'bleach.png', 'Ichigo Kurosaki es un adolescente japonés aparentemente ordinario que tiene la facultad de interactuar con los espíritus.​ Una noche, Ichigo se topa con un ente que no había conocido antes una shinigami —personificación japonesa del Dios de la muerte— llamada Rukia Kuchiki, quien se sorprende que pueda verla y de su poder espiritual latente. Sin embargo, su conversación es interrumpida por la aparición de un hollow, un espíritu maligno que deja malheridos a la familia Kurosaki y a la propia Rukia al tratar de proteger a Ichigo, esta intenta traspasarle parte de sus poderes a Ichigo para que pueda enfrentarse al hollow en igualdad de condiciones. No obstante, Ichigo sin darse cuenta los absorbe casi por completo y logra vencer con facilidad al espíritu.​ Al día siguiente, Rukia aparece en la clase de Ichigo como una humana de apariencia normal, y le informa que debido a que ha absorbido la mayoría de sus poderes no puede regresar a su mundo hasta que los recupere. Entretanto, Ichigo aco', 2001, 2016, 705, 74, '3.2', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:07:12'),
(9, 'Toriko', 'トリコ', 'Toriko', 'Toriko', NULL, 'toriko.jpg', 'El planeta de Toriko se separa en dos partes; el mundo de los humanos (人間界, Ningen-kai) y el Mundo Gourmet (グルメ界, Gurume-kai). El mundo humano es donde existe la civilización moderna y ocupa sólo el 30% del planeta, el resto es el Mundo Gourmet, que es inhóspito para la mayoría de los seres humanos debido a la fuerza de la vida silvestre y los cambios climáticos extremos. En la Era Gourmet que comenzó hace cinco siglos en el final de la guerra de cien años, el sabor y la textura de los alimentos se ha vuelto muy importante. La Organización Internacional del Gourmet, o IGO, mantiene el orden y defiende a los civiles de los animales peligrosos y criminales gourmet. Originalmente la IGO estaba afiliada a las Naciones Unidas, la IGO es ahora independiente de ellos y tiene más influencia, ya que se compone de 360 naciones. Se aplican una calificación numérica de 1 a 100, denominado Niveles de captura, para la mayoría de los ingredientes en función de la dificultad de adquirirlo. La IGO tien', 2008, 2016, 396, 43, '3.3', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:07:24'),
(10, 'Yakusoku no Neverland', '約束のネバーランド', 'Yakusoku no Nebārando', 'The Promised Neverland', 'The Promised Neverland', 'promised-neverland.jpg', 'Ambientada en un futuro distópico en el año 2045, Emma es una niña huérfana de once años que vive en el orfanato Grace Field House, junto a otros 37 niños a los que considera sus hermanos, y bajo la custodia de una mujer conocida como «Madre». Los niños de ese hospicio viven felices y disfrutan de los mejores cuidados hasta que cumplen doce años, momento en el que tienen que marcharse de allí. Por norma general visten uniformes blancos, tienen un número de reconocimiento tatuado en el cuello, y hacen exámenes diarios en los que Emma siempre obtiene la máxima puntuación junto a sus mejores amigos Norman y Ray. En su tiempo libre, los niños pueden hacer lo que quieran salvo acercarse a dos sitios: la entrada que comunica con el exterior y la verja que delimita el bosque.', 2016, 2020, 181, 20, '4.0', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:09:02'),
(11, 'Shūmatsu no Valkyrie', '終末のワルキューレ', 'Shūmatsu no Warukyūre', 'Shūmatsu no Valkyrie', 'Valkyrie of the End', 'shuumatsu_no_valkyrie.png', 'En el congreso de Valhalla celebrado cada 1000 años, los dioses votaron por unanimidad por la extinción de la raza humana, los únicos que se oponen son las valquirias, cuyo líder, Brünnhilde, les recuerda a los dioses que en tales casos se les otorga a los seres humanos una última oportunidad, representada por el torneo Ragnarok donde los humanos tienen que luchar con ellos. Así comienza una serie de peleas donde grandes hombres de la historia se enfrentan a los dioses para la salvación de la humanidad mediante la explotación del poder y vínculo con las valquirias conocido como volund.', 2017, NULL, NULL, 9, '4.0', 1, 3, '2021-05-06 15:32:01', '2021-05-24 20:15:20'),
(12, 'Shi no Tori', '死ノ鳥', 'Shi no Tori', 'Shi no Tori', 'Dead Bird', 'shi-no-tori.jpg', 'El prisionero Akeboshi Kurou que estaba siendo trasladado a una prisión en Tokio está involucrado en el secuestro de un avión, en el proceso trata de salvar a una niña que fue tomada como rehén. Pero el avión es atacado por una manada de cuervos y un cuervo monstruo que hacen que el avión se estrelle.', 2018, 2019, 23, 3, '3.1', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:08:07'),
(13, 'To Aru Kagaku no Railgun', 'とある科学の超電磁砲', 'Toaru Kagaku no Rērugan', 'To Aru Kagaku no Railgun', 'A Certain Scientific Railgun', 'railgun.jpg', 'En la futurista Ciudad Academia, en la que el 80% de los residentes son estudiantes, muchos de los cuales son espers que poseen poderes psíquicos únicos, Mikoto Misaka es la tercera más fuerte de solo siete espers que han recibido el rango de nivel 5. La serie se centra en las aventuras de Mikoto y sus amigas; Kuroko Shirai, Kazari Uiharu y Ruiko Saten, antes y durante los eventos de To Aru Majutsu no Index.', 2007, NULL, NULL, 16, '4.3', 1, 5, '2021-05-06 15:32:01', '2021-05-24 20:07:45'),
(14, 'Shingeki no Kyojin', '進撃の巨人', 'Shingeki no Kyojin', 'Ataque a los titanes', 'Attack on Titan	', 'shingeki_no_kyojin.jpg', 'La historia comienza con Eren Jaeger quien vive de forma pacífica con su familia, su hermana adoptiva Mikasa Ackerman, y su único amigo Armin Arlert. Estos viven en el «distrito de Shiganshina» (シガンシナ区 Shiganshina-ku), una de las principales ciudades, ubicadas en la muralla María. Pero todo cambia cuando un Titán gigantesco crea una enorme grieta permitiendo la entrada de los titanes a la ciudad, mientras que otro Titán fuertemente blindado traspasa la muralla María haciendo de su protección inútil, y provocando una evacuación masiva en toda la población hacia la muralla interna Rose, la segunda de tres murallas concéntricas. Durante el ataque, Eren observa con horror como un Titán se come a su madre, mientras que su padre desaparece después de entregarle a Eren la llave del sótano de su casa, no sin antes encomendarle regresar a su hogar algún día. Después de la desaparición de su padre, Eren jura matar a todos los Titanes y se alista en el ejército junto con sus amigos.', 2009, NULL, NULL, 34, '4.0', 1, 5, '2021-05-06 15:32:01', '2021-05-24 20:08:00'),
(15, 'Oshi no Ko', '推しの子', 'Oshi no Ko', 'Oshi no Ko', NULL, 'oshi_no_ko.jpg', 'Ai Hoshino, de dieciséis años, es una idol hermosa y talentosa que es adorada por sus fans. Ella es la personificación de una joven doncella pura. Pero no todo lo que reluce es oro.\r\n\r\nGorou Honda es un ginecólogo rural y un gran admirador de Ai. Entonces, cuando la ídolo embarazada aparece en su hospital, está más que desconcertado. Gorou le promete un parto seguro. Poco sabe él, un encuentro con una figura misteriosa resultaría en su muerte prematura, o eso pensó.\r\n\r\nAl abrir los ojos en el regazo de su amado ídolo, Gorou descubre que ha renacido como Aquamarine Hoshino, ¡el hijo recién nacido de Ai! Con su mundo patas arriba, Gorou pronto se entera de que el mundo del espectáculo está lleno de espinas, donde el talento no siempre engendra éxito. ¿Conseguirá proteger la sonrisa de Ai que tanto ama con la ayuda de un aliado excéntrico e inesperado?', 2020, NULL, NULL, 2, '4.0', 1, 3, '2021-05-06 15:32:01', '2021-05-24 20:07:26'),
(16, 'Black Bullet', 'ブラック・ブレット', 'Burakku Buretto', 'Black Bullet', NULL, 'black_bullet.jpg', 'En el año 2021, la humanidad es atacada y diezmada por la epidemia Gastrea, un virus parásito que se manifiesta en forma de monstruos gigantes con aspecto de insectos, y se ven obligados a vivir dentro de las paredes de El monolito, un territorio que se crea a partir de Varanium: un metal negro que es capaz de someter a los Gastrea. Por otro lado, las niñas que nacen infectadas con el virus Gastrea (como consecuencia de un ataque a la progenitora durante el embarazo) obtienen habilidades sobrehumanas, como resultado, se estudiaron y se denominaron \"La gente maldita\". Debido a la intervención del virus Gastrea, sólo \"las niñas malditas\" tenían los ojos rojos y conservaban aspecto infantil.', 2012, 2014, 20, 4, '3.1', 2, 3, '2021-05-06 15:32:01', '2021-05-24 20:07:32'),
(17, 'Ano Hi Mita Hana no Namae o Bokutachi wa Mada Shiranai.', 'あの日見た花の名前を僕達はまだ知らない。', 'Ano Hi Mita Hana no Namae wo Boku-tachi wa Mada Shiranai.', 'AnoHana, Aún no sabemos el nombre de la flor que vimos aquel día', 'AnoHana, We Still Don\'t Know the Name of the Flower We Saw That Day', 'ano-hana.jpg', 'Un grupo de amigos de la infancia se separan debido a un trágico accidente (la muerte de su amiga, Menma) en el cual perdieron su amistad. Jinta deberá reunir a sus antiguos amigos de la infancia ya que esa amiga que perdieron regresa como un espíritu para cumplir una promesa que hizo antes de morir, esta misión revelara nuevos y viejos sentimientos en los personajes para conseguir ese único deseo.', 2012, 2013, 13, 3, '4.1', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:07:56'),
(18, 'Kimetsu no Yaiba', '鬼滅の刃', 'Kimetsu no Yaiba', 'Guardianes De La Noche', 'Demon Slayer: Kimetsu no Yaiba', 'kimetsu.jpg', 'En la Era Taisho,Tanjiro Kamado es un chico inteligente con un buen olfato y corazón que vivía con su familia en las montañas y ganaba dinero vendiendo carbón, pero todo cambia cuando su familia es atacada y asesinada por un demonio (oni). Tanjiro y su hermana Nezuko son los únicos supervivientes del incidente, aunque su hermana Nezuko fue transformada en un demonio, pero sorprendentemente todavía mostrando signos de emoción y pensamiento humanos.Después de un encuentro con Giyu Tomioka,un asesino de demonios,Tanjiro es reclutado por Urokodaki para convertirse también en un asesino de demonios y así comienza su búsqueda para ayudar a su hermana a volverse humana nuevamente.', 2016, 2020, 207, 23, '4.0', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:08:10'),
(19, 'Another', 'アナザー', 'Anazā', 'Another', NULL, 'another.jpg', 'En 1972, un popular y carismático estudiante llamado Misaki Yomiyama perteneciente a la clase 3-3 de la escuela Yomiyama del Norte, murió repentinamente a mitad del año escolar. Devastados por la pérdida, sus compañeros y maestro actuaron como si Misaki todavía estuviese vivo e incluso reservaron un lugar para él en la ceremonia de graduación. Lo que fue aún más elocuente, fue que Misaki apareció en la fotografía de la graduación.', 2010, 2012, 20, 4, '4.1', 2, 3, '2021-05-06 15:32:01', '2021-05-24 20:07:35'),
(20, 'Kaiketsu Zorori', 'かいけつゾロリ', 'Kaiketsu Zorori', 'Zorori el extraordinario', 'Incredible Zorori', 'zorori.png', 'Ambientada en un mundo paralelo habitado por animales antropomórficos (en su versión terrestre de Japón), la historia sigue al protagonista, un zorro llamado Zorori y sus aprendices gemelos de bandido jabalí Ishishi y Noshishi mientras viajan de un lugar a otro. La serie debutó en 1987 con su primer número: Kaiketsu Zorori no Doragon Taiji (か い け つ ゾ ロ リ の ド ラ ゴ ン た い じ, \"The Incredible Zorori, Dragon Slayer\") y ha publicado alrededor de dos números por año, con un total de 60 números a diciembre de 2016. fue adaptado a una serie de anime del 1 de febrero de 2004 al 28 de enero de 2007. Una versión doblada al inglés producida en Hong Kong por Red Angel Media se emitió en Cartoon Network Filipinas el 4 de enero de 2010.', 2003, 2009, 58, 10, '4.6', 2, 2, '2021-05-06 15:32:01', '2021-05-24 20:08:47'),
(21, 'Wotaku ni Koi wa Muzukashī', 'ヲタクに恋は難しい', 'Wotaku ni Koi wa Muzukashī', 'El amor es difícil para un otaku', 'Wotakoi: Love Is Hard for Otaku', 'wotakoi.jpg', 'Narumi es una joven oficinista que esta iniciando su trabajo en una nueva compañía, es una apasionada fujoshi que intenta mantener oculta su afición. Por otra parte Hirotaka es un callado y capacitado oficinista adicto a los juegos de video, sin embargo al ser puntual y productivo en su trabajo, no intenta mantener en secreto su afición. Ambos se conocen desde la escuela y se han reencontrado en la misma oficina, en adelante ambos comenzarán una relación que al principio parece no ser romántica.', 2014, NULL, NULL, 9, '3.9', 1, 1, '2021-05-06 15:32:01', '2021-05-24 20:15:28'),
(22, 'Enen no Shouboutai', '炎炎ノ消防隊', 'En\'en no Shōbōtai', 'Fire Force', 'Fire Force', 'fire_force.jpg', 'Shinra Kusakabe es un joven pirocinético de tercera generación que ganó el apodo de \"Huellas del Diablo\" por su habilidad para encender sus pies a voluntad. Se une al Escuadrón Fire Force 8, que está compuesto por otros usuarios de llamas mientras trabajan para extinguir cualquier Infernal que encuentren. Cuando aparece una facción que está creando Infernales, Shinra comienza a descubrir la causa de un misterioso incendio que mató a su familia 12 años atrás.', 2015, NULL, NULL, 26, '3.4', 1, 5, '2021-05-06 15:32:01', '2021-05-24 20:08:24'),
(23, 'Ao Haru Ride', 'アオハライド', 'Aoharaido', 'Ao Haru Ride', 'Blue Spring Ride', 'aoharu.jpg', 'Futaba Yoshioka quiere \"reiniciar\" su vida. En secundaria, las niñas la excluían por su popularidad entre los chicos. El único muchacho que le gustaba, Kou Tanaka, se mudó antes de que ella pudiera decirle lo que sentía. Ahora en preparatoria, está decidida a ser todo lo impropio de una dama para que sus nuevas amigas no tengan celos de ella. Mientras vive su nueva vida, se reencuentra con Kou, solo que ahora usa el nombre de Kou Mabuchi y tiene una actitud fría. Él le dice que sentía lo mismo por ella en secundaria, pero que no pueden regresar a lo que fue. Ella se encuentra perdida entre los recuerdos del antiguo Kou con el actual, divagando cuales son sus sentimientos actuales.', 2011, 2015, 53, 13, '4.2', 2, 4, '2021-05-06 15:32:01', '2021-05-24 20:08:04'),
(24, 'Tate no Yuusha no Nariagari', '盾の勇者の成り上がり', 'Tate no Yūsha no Nariagari', 'The Rising of the Shield Hero', 'The Rising of The Shield Hero', 'tate.jpg', 'Naofumi Iwatani fue invocado en un mundo paralelo junto a otras tres personas para convertirse en los héroes de ese mundo. Cada uno de los héroes fue equipado con su propia arma legendaria cuando fueron convocados. Naofumi recibió el Escudo, el único equipo defensivo, mientras que los otros recibieron armas capaces de atacar. Debido a la falta de carisma y experiencia, Naofumi terminó con una sola compañera de equipo.', 2014, NULL, NULL, 17, '4.1', 1, 3, '2021-05-06 15:32:01', '2021-05-24 20:09:06'),
(25, 'Koe no Katachi', '聲の形', 'Koe no Katachi', 'La voz silenciosa', 'A Silent Voice', 'koe.jpg', 'La historia gira en torno a Shōko Nishimiya, una estudiante de primaria que es sorda de nacimiento y que al cambiarse de colegio comienza a recibir acoso escolar por parte de sus nuevos compañeros. Uno de los principales responsables es Shōya Ishida quien termina por forzar que Nishimiya se cambie de escuela. Como resultado de los actos contra Shoko las autoridades del colegio toman cartas en el asunto y el curso señala como único responsable a Ishida, quien comienza a sentir el acoso impuesto por sus propios compañeros, al mismo tiempo que termina aislándose de los que alguna vez fueron sus amigos. Años después, Ishida intenta corregir su mal actuar, buscando la redención frente a Nishimiya.', 2013, 2014, 64, 7, '4.8', 2, 5, '2021-05-06 15:32:01', '2021-05-24 20:07:49'),
(26, 'Owari no Seraph', '終わりのセラフ', 'Owari no Serafu', 'Seraph of the End', 'Seraph of the End: Vampire Reign', 'serafin.jpg', 'En el año 2012, el mundo llegó a su fin a causa de un letal virus de origen humano, el cual aniquiló a casi toda la especie humana con la excepción de los niños menores de trece años. Al mismo tiempo, los vampiros emergieron de las profundidades de la tierra y se establecieron como la raza dominante. Estos ofrecen seguridad a los sobrevivientes a cambio de subsistir mutuamente ofreciéndose como ganado, es decir, donar sangre voluntariamente. Cuatro años después de estos sucesos, Yūichirō \"Yū\" Hyakuya y su amigo Mikaela planean escapar del dominio de los vampiros junto a los otros niños del Orfanato Hyakuya. Sin embargo, el plan termina en una masacre y todos ellos son asesinados, mientras que Mikaela se sacrificó con el fin de que Yūichirō escapase. Al escapar, Yūichirō es acogido por los miembros de la Compañía Demonio Lunar, una unidad de exterminio parte del Ejército Demoníaco Imperial Japonés. Otros cuatro años más tarde, Yūichirō se dedica a luchar contra los vampiros con sed de v', 2012, NULL, NULL, 22, '4.0', 1, 5, '2021-05-06 15:32:01', '2021-05-24 20:08:59'),
(27, 'Arte', 'アルテ', 'Arute', 'Arte', NULL, 'arte.jpg', 'Florencia, año 1506. Arte Spalletti es la única hija de una familia florentina noble pero decadente que, desde la infancia, mostró un especial amor y propensión a la pintura. Sin embargo, cuando su padre, el único que la había alentado y apoyado en sus pasiones, muere repentinamente, su madre la obliga a apartar su amor por las artes y encontrar a un joven noble para casarse lo antes posible a fin de salvar a los Spalletti de la ruina.', 2013, NULL, NULL, 13, '4.2', 1, 3, '2021-05-06 15:32:01', '2021-05-24 20:07:38');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `manga_autor`
--

CREATE TABLE `manga_autor` (
  `idManga` int(11) NOT NULL,
  `idAutor` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `manga_autor`
--

INSERT INTO `manga_autor` (`idManga`, `idAutor`) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(9, 9),
(10, 10),
(10, 11),
(11, 12),
(11, 13),
(12, 14),
(13, 15),
(13, 16),
(14, 17),
(15, 5),
(16, 18),
(16, 19),
(17, 20),
(17, 21),
(18, 22),
(19, 23),
(20, 24),
(21, 25),
(22, 26),
(23, 27),
(24, 28),
(25, 29),
(26, 30),
(27, 31);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `manga_genero`
--

CREATE TABLE `manga_genero` (
  `idManga` int(11) NOT NULL,
  `idGenero` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `manga_genero`
--

INSERT INTO `manga_genero` (`idManga`, `idGenero`) VALUES
(1, 1),
(1, 2),
(1, 3),
(1, 4),
(1, 5),
(1, 6),
(1, 7),
(1, 8),
(1, 9),
(1, 10),
(1, 11),
(2, 1),
(2, 4),
(2, 6),
(2, 9),
(2, 12),
(2, 13),
(3, 1),
(3, 4),
(3, 11),
(3, 12),
(3, 14),
(4, 1),
(4, 4),
(4, 6),
(4, 9),
(4, 15),
(5, 6),
(5, 12),
(5, 16),
(5, 17),
(5, 18),
(6, 1),
(6, 4),
(6, 6),
(6, 15),
(6, 18),
(6, 19),
(6, 20),
(7, 6),
(7, 21),
(8, 1),
(8, 4),
(8, 5),
(8, 6),
(8, 8),
(8, 12),
(8, 14),
(9, 1),
(9, 4),
(9, 11),
(9, 12),
(10, 1),
(10, 2),
(10, 5),
(10, 6),
(10, 7),
(10, 13),
(10, 23),
(10, 24),
(11, 1),
(11, 6),
(11, 8),
(11, 14),
(11, 15),
(11, 19),
(11, 20),
(11, 25),
(12, 6),
(12, 7),
(12, 8),
(12, 25),
(13, 1),
(13, 6),
(13, 8),
(13, 11),
(13, 12),
(13, 13),
(13, 14),
(13, 23),
(14, 1),
(14, 2),
(14, 3),
(14, 6),
(14, 7),
(14, 8),
(14, 11),
(14, 14),
(14, 23),
(14, 25),
(15, 6),
(15, 8),
(15, 10),
(15, 24),
(15, 26),
(16, 1),
(16, 3),
(16, 6),
(16, 10),
(16, 13),
(16, 14),
(16, 23),
(16, 27),
(16, 28),
(17, 6),
(17, 8),
(17, 16),
(17, 18),
(17, 21),
(17, 23),
(18, 1),
(18, 2),
(18, 4),
(18, 5),
(18, 6),
(18, 8),
(18, 15),
(19, 6),
(19, 7),
(19, 10),
(19, 16),
(19, 23),
(19, 24),
(20, 4),
(20, 12),
(21, 12),
(21, 17),
(21, 18),
(22, 1),
(22, 2),
(22, 6),
(22, 8),
(22, 12),
(22, 13),
(23, 6),
(23, 12),
(23, 16),
(23, 17),
(23, 18),
(23, 21),
(24, 1),
(24, 2),
(24, 4),
(24, 6),
(24, 30),
(25, 6),
(25, 16),
(25, 18),
(25, 21),
(26, 1),
(26, 2),
(26, 6),
(26, 8),
(26, 31),
(27, 6),
(27, 15);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `manga_revista`
--

CREATE TABLE `manga_revista` (
  `idManga` int(11) NOT NULL,
  `idRevista` int(11) NOT NULL,
  `publicacion` varchar(100) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `manga_revista`
--

INSERT INTO `manga_revista` (`idManga`, `idRevista`, `publicacion`) VALUES
(1, 1, '(1992-presente)'),
(1, 3, '(1989-1992)'),
(2, 4, ''),
(3, 6, ''),
(4, 7, ''),
(5, 7, '(2016-actualidad)'),
(5, 8, '(2015-2016)'),
(6, 6, ''),
(7, 6, ''),
(8, 6, ''),
(9, 6, ''),
(10, 6, ''),
(11, 9, ''),
(12, 10, ''),
(13, 11, ''),
(14, 12, ''),
(15, 7, ''),
(16, 13, ''),
(17, 14, ''),
(18, 6, ''),
(19, 15, ''),
(20, 16, ''),
(21, 17, ''),
(22, 18, ''),
(23, 19, ''),
(24, 20, ''),
(25, 18, ''),
(26, 14, ''),
(27, 9, '');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `manga_usuario`
--

CREATE TABLE `manga_usuario` (
  `id` int(11) NOT NULL,
  `favorito` tinyint(1) NOT NULL DEFAULT 0,
  `nota` int(11) DEFAULT NULL,
  `idEstado` int(11) DEFAULT NULL,
  `volumenes` int(11) DEFAULT NULL,
  `capitulos` int(11) DEFAULT NULL,
  `idManga` int(11) NOT NULL,
  `idUsuario` int(11) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `manga_usuario`
--

INSERT INTO `manga_usuario` (`id`, `favorito`, `nota`, `idEstado`, `volumenes`, `capitulos`, `idManga`, `idUsuario`, `created_at`, `updated_at`) VALUES
(1, 0, 3, 1, 40, 363, 1, 30, '2021-05-06 15:32:01', '2021-05-25 21:33:37'),
(2, 0, 10, 1, 40, 363, 1, 36, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(3, 0, 7, 1, 37, 14, 2, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(4, 1, 10, 2, 5, 1, 3, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(5, 0, 0, 2, 0, 0, 3, 35, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(6, 1, 9, 1, 96, 980, 3, 36, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(7, 1, 10, 2, 0, 0, 3, 39, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(8, 1, 3, 1, 0, 2, 4, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(9, 0, 10, 1, 4, 3, 5, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(10, 0, 0, 1, 0, 0, 5, 35, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(11, 0, 10, 1, 20, 200, 5, 37, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(13, 1, 0, 1, 0, 0, 9, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(14, 1, 4, 1, 0, 0, 10, 35, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(15, 1, 6, 2, 3, 23, 12, 35, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(16, 0, 6, 4, 0, 0, 13, 35, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(17, 1, 10, 1, 34, 138, 14, 36, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(18, 1, NULL, 2, 31, 138, 14, 39, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(19, 0, 8, 1, 2, 16, 15, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(20, 0, 9, 1, 1, 10, 15, 37, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(21, 1, 0, 1, 0, 0, 16, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(22, 1, 5, 1, 1, 2, 17, 30, '2021-05-06 15:32:01', '2021-05-10 17:32:39'),
(23, 0, 9, 3, 2, 1, 17, 35, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(24, 0, 5, 2, 24, 207, 18, 30, '2021-05-06 15:32:01', '2021-05-06 17:25:42'),
(25, 0, 0, 1, 0, 0, 20, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(26, 0, 0, 3, 0, 0, 21, 30, '2021-05-06 15:32:01', '2021-05-06 15:32:01'),
(27, 1, 3, 4, 2, 3, 27, 30, '2021-05-12 20:38:51', '2021-05-12 18:38:51'),
(30, 0, 4, 2, 0, 0, 6, 30, '2021-05-25 23:48:02', '2021-05-25 21:53:29');

--
-- Disparadores `manga_usuario`
--
DELIMITER $$
CREATE TRIGGER `DELETE_manga_usuario` AFTER DELETE ON `manga_usuario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    OLD.idUsuario,
    'DELETE',
    'manga_usuario',
    OLD.id,
    'Manga eliminado de la lista'
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `INSERT_manga_usuario` AFTER INSERT ON `manga_usuario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    NEW.idUsuario,
    'INSERT',
    'manga_usuario',
    NEW.id,
    'Manga añadido a la lista'
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `UPDATE_manga_usuario` AFTER UPDATE ON `manga_usuario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion,
        anterior_valor,
        nuevo_valor
    )
VALUES(
    NEW.idUsuario,
    'UPDATE',
    'manga_usuario',
    NEW.id,
    'Manga de la lista editado',
    JSON_OBJECT('favorito', OLD.favorito, 'nota', OLD.nota, 'idEstado', OLD.idEstado, 'volumenes', OLD.volumenes, 'capitulos', OLD.capitulos),
    JSON_OBJECT('favorito', NEW.favorito, 'nota', NEW.nota, 'idEstado', NEW.idEstado, 'volumenes', NEW.volumenes, 'capitulos', NEW.capitulos)
) ; END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `puntuacion_comentario`
--

CREATE TABLE `puntuacion_comentario` (
  `id` int(11) NOT NULL,
  `tipo` enum('positivo','negativo') NOT NULL,
  `idComentario` int(11) DEFAULT NULL,
  `idUsuario` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Volcado de datos para la tabla `puntuacion_comentario`
--

INSERT INTO `puntuacion_comentario` (`id`, `tipo`, `idComentario`, `idUsuario`, `created_at`, `updated_at`) VALUES
(1, 'positivo', 1, 31, '2021-05-17 19:20:29', '2021-05-17 19:20:29'),
(2, 'positivo', 1, 39, '2021-05-17 19:20:41', '2021-05-17 19:20:41'),
(3, 'negativo', 1, 36, '2021-05-17 19:36:18', '2021-05-17 19:36:18'),
(4, 'positivo', 2, 39, '2021-05-17 19:36:56', '2021-05-17 19:36:56'),
(7, 'positivo', 1, 10, '2021-05-17 19:50:17', '2021-05-17 19:50:17'),
(9, 'positivo', 2, 30, '2021-05-17 19:50:30', '2021-05-17 19:50:30'),
(25, 'positivo', 1, 30, '2021-05-17 22:51:47', '2021-05-17 22:51:47'),
(33, 'positivo', 17, 30, '2021-05-19 17:34:04', '2021-05-25 18:44:18'),
(34, 'positivo', 39, 30, '2021-05-20 23:29:24', '2021-05-20 23:29:24'),
(35, 'positivo', 45, 30, '2021-05-21 00:03:03', '2021-05-21 00:03:03'),
(36, 'positivo', 33, 30, '2021-05-21 14:43:24', '2021-05-21 14:43:24'),
(37, 'positivo', 32, 30, '2021-05-21 14:43:39', '2021-05-21 14:43:39'),
(38, 'positivo', 40, 30, '2021-05-21 14:43:39', '2021-05-21 14:43:39'),
(40, 'positivo', 52, 30, '2021-05-25 19:21:02', '2021-05-25 19:21:02');

--
-- Disparadores `puntuacion_comentario`
--
DELIMITER $$
CREATE TRIGGER `DELETE_puntuacion_comentario` AFTER DELETE ON `puntuacion_comentario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    OLD.idUsuario,
    'DELETE',
    'comentario',
    OLD.id,
    'Puntuación a comentario eliminada'
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `INSERT_puntuacion_comentario` AFTER INSERT ON `puntuacion_comentario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion
    )
VALUES(
    NEW.idUsuario,
    'INSERT',
    'puntuacion_comentario',
    NEW.id,
    'Puntuación a comentario nueva'
) ; END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `UPDATE_puntuacion_comentario` AFTER UPDATE ON `puntuacion_comentario` FOR EACH ROW BEGIN
    INSERT INTO actividad_usuario(
        idUsuario,
        tipo,
        origen,
        idOrigen,
        accion,
        anterior_valor,
        nuevo_valor
    )
VALUES(
    NEW.idUsuario,
    'UPDATE',
    'puntuacion_comentario',
    NEW.id,
    'Puntuación a comentario editada',
    OLD.tipo,
    NEW.tipo
) ; END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `revista`
--

CREATE TABLE `revista` (
  `idRevista` int(11) NOT NULL,
  `nombre` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `link` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL,
  `idEditorial` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `revista`
--

INSERT INTO `revista` (`idRevista`, `nombre`, `link`, `idEditorial`) VALUES
(1, 'Young Animal', 'https://es.wikipedia.org/wiki/Young_Animal_(revista)', 1),
(3, 'Animal House', 'https://es.wikipedia.org/wiki/Young_Animal_(revista)', 1),
(4, 'Gekkan Shōnen Gangan', 'https://es.wikipedia.org/wiki/Gekkan_Sh%C5%8Dnen_Gangan', 2),
(6, 'Shōnen Jump', 'https://es.wikipedia.org/wiki/Sh%C5%ABkan_Sh%C5%8Dnen_Jump', 3),
(7, 'Shūkan Young Jump', 'https://es.wikipedia.org/wiki/Sh%C5%ABkan_Young_Jump', 3),
(8, 'Miracle Jump', 'https://en.wikipedia.org/wiki/Weekly_Young_Jump#Miracle_Jump', 3),
(9, 'Gekkan Comic Zenon', 'https://es.wikipedia.org/wiki/Gekkan_Comic_Zenon', 4),
(10, 'Shōnen Jump+', 'https://es.wikipedia.org/wiki/Sh%C5%8Dnen_Jump%2B', 3),
(11, 'Dengeki Daioh', 'https://es.wikipedia.org/wiki/Dengeki_Daioh', 5),
(12, 'Bessatsu Shōnen Magazine', 'https://es.wikipedia.org/wiki/Bessatsu_Sh%C5%8Dnen_Magazine', 6),
(13, 'Dengeki Maoh', 'https://es.wikipedia.org/wiki/Dengeki_Maoh', 5),
(14, 'Jump Square', 'https://es.wikipedia.org/wiki/Jump_Square', 3),
(15, 'Young Ace', 'https://es.wikipedia.org/wiki/Young_Ace', 7),
(16, 'Comic BunBun', 'https://ja.wikipedia.org/wiki/%E6%9C%88%E5%88%8A%E3%82%B3%E3%83%9F%E3%83%83%E3%82%AF%E3%83%96%E3%83%B3%E3%83%96%E3%83%B3', 8),
(17, 'Pixiv Comic Pool', NULL, 9),
(18, 'Shūkan Shōnen Magazine', 'https://es.wikipedia.org/wiki/Sh%C5%ABkan_Sh%C5%8Dnen_Magazine', 6),
(19, 'Margaret', 'https://es.wikipedia.org/wiki/Margaret_(revista)', 3),
(20, 'Monthly Comic Flapper', 'https://es.wikipedia.org/wiki/Monthly_Comic_Flapper', 10);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `seguidores`
--

CREATE TABLE `seguidores` (
  `id` int(11) NOT NULL,
  `idUsuario` int(11) NOT NULL,
  `idSeguidor` int(11) NOT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `usuario`
--

CREATE TABLE `usuario` (
  `id` int(11) NOT NULL,
  `username` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `activationCode` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `birthdayDate` date DEFAULT NULL,
  `avatar` varchar(200) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'noAvatar.jpg',
  `banner` varchar(200) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'noBanner.jpg',
  `biografia` varchar(160) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `token` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  `tokenLimit` datetime DEFAULT NULL,
  `admin` tinyint(1) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Volcado de datos para la tabla `usuario`
--

INSERT INTO `usuario` (`id`, `username`, `password`, `email`, `activationCode`, `birthdayDate`, `avatar`, `banner`, `biografia`, `created_at`, `updated_at`, `token`, `tokenLimit`, `admin`) VALUES
(1, 'avery.wunsch', '82417fb2dcb135d4d756482694c554e5e28d2838', 'pstamm@example.com', 'efoq', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(2, 'oberbrunner.jovan', 'be292b1e6172182185a9151b4d444dd5f6f0f90b', 'ferry.francesca@example.net', 'awui', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(3, 'amanda.hartmann', '69c258a5832e02fdfbe1eb2f637259a25aa09609', 'herta.bruen@example.net', 'njjf', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(4, 'stiedemann.carmella', '51ba84a893353ee283f328cdc60d1615d4d70790', 'nritchie@example.com', 'udls', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(5, 'ifeeney', 'fc16ea85de3ea91bbbacb838abf41205fe88fda7', 'emelie14@example.net', 'pzej', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(6, 'kuhn.vida', 'ddf1f8239714c9aba73f0edf6e7989aca65a5ff2', 'aurore23@example.com', 'bydo', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(7, 'lawson.powlowski', '6e7e6b2a2424d826f89d269ea7b0c103ff60edc8', 'nchamplin@example.com', 'wevl', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(8, 'dietrich.berta', 'd2865d9a44e5ac4c057394c0a88de6c723ed21fe', 'javonte41@example.org', 'aygm', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(9, 'zmacejkovic', '5e35b867258e81e7a447e70d8e7dd141b67fe43f', 'bernhard.dillon@example.com', 'qntx', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(10, 'dadams', 'dae9fb0acca6fc260a4fdc714ff5e675cb807967', 'lynch.naomie@example.com', 'jorb', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 11:57:34', '2021-05-06 15:32:01', NULL, NULL, 0),
(26, 'sdd', '$2y$10$PHzNjfY.Zpd8sxm6VJ.mz.erEnkFBSBn3CrsVudv8RXH4SFR90J.e', 'cfdhd@dskd.fdf', '7634ea65a4e6d9041cfd3f7de18e334a', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 16:49:41', '2021-05-06 15:32:01', NULL, NULL, 0),
(27, 'fikhn', '$2y$10$Q79tWnL1JNlKEEURL0rJHub5bXbhJ/Jfls1pQ4abWmv898RdQqqMS', 'bshdbsai@djd.dsds', '67c6a1e7ce56d3d6fa748ab6d9af3fd7', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 16:58:04', '2021-05-06 15:32:01', NULL, NULL, 0),
(28, 'dsdi', '$2y$10$5XdOurHolcK3vRpIhoLFYuBVRNC5Vbsxod018Z3Nt0yXjag8Ds4K.', 'fndsjfds@dfsjifsdhn.ds', '4b6538a44a1dfdc2b83477cd76dee98e', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 17:06:02', '2021-05-06 15:32:01', NULL, NULL, 0),
(29, 'ºidfnd', '$2y$10$cfc/Kjjkoc7ZypqLyY56hOtgWpd.vfHSU.Bscp9KBHzlPbWJdGnqG', 'ssdffsdf@dsfsd.fdfd', '4b04a686b0ad13dce35fa99fa4161c65', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-02-22 17:20:48', '2021-05-06 15:32:01', NULL, NULL, 0),
(30, 'TCLARISERN', '$2y$10$oetL0LHz7I7GHvBh0QNV.ee1CudFcepQw4NjPLWHIN5oMVNcf9xOO', 'tomeupau01@gmail.com', 'Active', '2001-03-05', 'avatar_30.jpg', 'banner_30.jpg', 'Hey que tal?', '2021-02-27 16:55:49', '2021-05-06 15:32:01', 'cf43e88027845fb5c538779c557a3923', '2021-03-19 12:12:56', 0),
(31, 'TCLARIS', '$2y$10$dDGX2ypewUsdTffKQyy07OoLoVrb2QYBuFEeVbBRhwwFmPGlEKreS', 'tomeupau01+1@gmail.com', 'Active', NULL, 'avatar_31.jpg', 'banner_31.jpg', ' sa ji ji ji a', '2021-03-02 14:27:01', '2021-05-06 15:32:01', 'fa4fde08fa5594772071d7b59f7b8de3', '2021-03-07 22:25:16', 0),
(32, 'とめう', '$2y$10$tKilpNCbSDGNhWV4rYFfRO08HHeOvHCmQXWse1u0slg3FFhy8CHOG', 'tomeupau01+2@gmail.com', 'Active', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-03-10 11:55:23', '2021-05-06 15:32:01', NULL, NULL, 0),
(33, 'TCLAR', '$2y$10$gpnKA4Whhp9BmjyJSKeMQuEqsp6P448lUfarPz9FLV/xXFEjlVALq', 'ssdas@ga.cs', '45fbc6d3e05ebd93369ce542e8f2322d', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-03-10 13:55:05', '2021-05-06 15:32:01', NULL, NULL, 0),
(34, 'TCLARIS12', '$2y$10$knOHR4fIFMg7l8QrKTJ0/udemE86HlEJlqc1DPeIr.IoTwQc.mL0C', 'tomeupau01+6@gmail.com', 'a8c88a0055f636e4a163a5e3d16adab7', NULL, 'noAvatar.jpg', 'noBanner.jpg', NULL, '2021-03-10 14:22:09', '2021-05-06 15:32:01', NULL, NULL, 0),
(35, 'TomeuClar', '$2y$10$ZXFDKO4RfOL0.4EJ74/3sO473Mu6zKdHs4wPrXWVJ4Tkrtgl0mGB2', 'tomeupau01+7@gmail.com', 'Active', '2007-03-06', 'avatar_35.jpg', 'banner_35.jpg', 'Hola! Yo soy Tomeu, el creador de este sitio web  :)\n\n', '2021-03-11 01:52:39', '2021-05-06 15:32:01', '1dda935e4693e6991abb4aa53542646d', '2021-03-20 01:14:05', 0),
(36, 'llabreso', '$2y$10$IyBgjNS33RAV.q1kPBtsq.ij.Jpv6u524IMCsvvemI3TNRDHDSOq.', 'joanllabresoliver@gmail.com', 'Active', '2001-09-12', 'avatar_36.jpg', 'banner_36.jpg', 'Esteban si ve esto apruebame plz', '2021-03-11 12:20:33', '2021-05-06 15:32:01', '4b65358a585338488ffb7ce2d5107097', '2021-03-18 14:13:12', 0),
(37, 'JaumeColl', '$2y$10$JD/ksZC5/B0qQfC968Hu2uueLd19GFHX53JBYn4XLMj8dqiXznKyG', 'jaumecoll@paucasesnovescifp.cat', 'Active', '2001-03-02', 'avatar_37.jpg', 'banner_37.jpg', 'Electricista, próximo CEO de Enel Green. 15 años de experiencia en el sector de desmontar cosas y no poder arreglarlas. Me quedan 6 días de clase', '2021-03-11 12:37:59', '2021-05-06 15:32:01', '7efe319cdf9cda567e916e0eef123474', '2021-03-18 22:11:24', 0),
(38, 'Paco El del Bar', '$2y$10$snNAJZ83JgJZKa6ycVuxfOUYrMUmpQU2g8n5FlsBGtaaC3C36s/um', 'Ggpacoeldelbar@gmail.com', 'Active', NULL, 'avatar_38.jpg', 'banner_38.jpg', 'UwU pero de un tabernero borracho', '2021-03-11 12:44:40', '2021-05-06 15:32:01', 'b36a41668b477633359abac2f3a35883', '2021-03-18 14:13:25', 0),
(39, 'Asierxo', '$2y$10$QUMPIFetqCGp8lSqRSAOE.ogplzgO3dtIY5K9ENJ/IOtmw9O.Z7T2', 'asierouekkainieto@gmail.com', 'Active', '2000-07-24', 'avatar_39.jpg', 'banner_39.jpg', 'Soy Asierxo, Creo que sacaré un 4 de esta práctica porque esta es jesucristo :)', '2021-03-12 16:20:50', '2021-05-06 15:32:01', 'c900a55360529c9fa0e45578cf55eb70', '2021-03-19 16:35:18', 0);

-- --------------------------------------------------------

--
-- Estructura para la vista `base_mangas`
--
DROP TABLE IF EXISTS `base_mangas`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `base_mangas`  AS SELECT `manga`.`id` AS `id`, `manga`.`tituloPreferido` AS `tituloPreferido`, `manga`.`tituloJA` AS `tituloJA`, `manga`.`tituloRōmaji` AS `tituloRōmaji`, `manga`.`tituloES` AS `tituloES`, `manga`.`tituloEN` AS `tituloEN`, `manga`.`foto` AS `foto`, `manga`.`argumento` AS `argumento`, `manga`.`añoDePublicacion` AS `añoDePublicacion`, `manga`.`añoDeFinalizacion` AS `añoDeFinalizacion`, `manga`.`capitulos` AS `capitulos`, `manga`.`volumenes` AS `volumenes`, `manga`.`nota` AS `nota`, `estado`.`estado` AS `estado`, `demografia`.`demografia` AS `demografia` FROM ((`manga` join `estado` on(`manga`.`idEstado` = `estado`.`idEstado`)) join `demografia` on(`manga`.`idDemografia` = `demografia`.`idDemografia`)) ;

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `actividad_usuario`
--
ALTER TABLE `actividad_usuario`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idUsuario` (`idUsuario`);

--
-- Indices de la tabla `amistades`
--
ALTER TABLE `amistades`
  ADD PRIMARY KEY (`id`),
  ADD KEY `amistades_ibfk_1` (`idUsuario`),
  ADD KEY `amistades_ibfk_2` (`idAmigo`);

--
-- Indices de la tabla `autor`
--
ALTER TABLE `autor`
  ADD PRIMARY KEY (`idAutor`),
  ADD UNIQUE KEY `nombre` (`nombre`);

--
-- Indices de la tabla `comentario`
--
ALTER TABLE `comentario`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idPadre` (`idPadre`),
  ADD KEY `idUsuario` (`idUsuario`);

--
-- Indices de la tabla `comentario_manga`
--
ALTER TABLE `comentario_manga`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `idComentario_2` (`idComentario`),
  ADD KEY `idComentario` (`idComentario`),
  ADD KEY `idManga` (`idManga`);

--
-- Indices de la tabla `comentario_usuario`
--
ALTER TABLE `comentario_usuario`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `idComentario_2` (`idComentario`),
  ADD KEY `idComentario` (`idComentario`),
  ADD KEY `idUsuario` (`idUsuario`);

--
-- Indices de la tabla `demografia`
--
ALTER TABLE `demografia`
  ADD PRIMARY KEY (`idDemografia`),
  ADD UNIQUE KEY `demografia` (`demografia`);

--
-- Indices de la tabla `editorial`
--
ALTER TABLE `editorial`
  ADD PRIMARY KEY (`idEditorial`),
  ADD UNIQUE KEY `nombre` (`nombre`);

--
-- Indices de la tabla `estado`
--
ALTER TABLE `estado`
  ADD PRIMARY KEY (`idEstado`),
  ADD UNIQUE KEY `estado` (`estado`);

--
-- Indices de la tabla `estado_manga_usuario`
--
ALTER TABLE `estado_manga_usuario`
  ADD PRIMARY KEY (`idEstado`),
  ADD UNIQUE KEY `estado` (`estado`);

--
-- Indices de la tabla `genero`
--
ALTER TABLE `genero`
  ADD PRIMARY KEY (`idGenero`),
  ADD UNIQUE KEY `genero` (`genero`);

--
-- Indices de la tabla `manga`
--
ALTER TABLE `manga`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `tituloJA` (`tituloJA`),
  ADD UNIQUE KEY `tituloRōmaji` (`tituloRōmaji`),
  ADD UNIQUE KEY `tituloPreferido` (`tituloPreferido`),
  ADD UNIQUE KEY `tituloES` (`tituloES`),
  ADD UNIQUE KEY `tituloEN` (`tituloEN`),
  ADD KEY `idEstado` (`idEstado`),
  ADD KEY `idDemografia` (`idDemografia`);

--
-- Indices de la tabla `manga_autor`
--
ALTER TABLE `manga_autor`
  ADD PRIMARY KEY (`idManga`,`idAutor`),
  ADD KEY `idAutor` (`idAutor`);

--
-- Indices de la tabla `manga_genero`
--
ALTER TABLE `manga_genero`
  ADD PRIMARY KEY (`idManga`,`idGenero`),
  ADD KEY `idGenero` (`idGenero`);

--
-- Indices de la tabla `manga_revista`
--
ALTER TABLE `manga_revista`
  ADD PRIMARY KEY (`idManga`,`idRevista`),
  ADD KEY `idRevista` (`idRevista`);

--
-- Indices de la tabla `manga_usuario`
--
ALTER TABLE `manga_usuario`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idUsuario` (`idUsuario`),
  ADD KEY `idManga` (`idManga`),
  ADD KEY `manga_usuario_ibfk_3` (`idEstado`);

--
-- Indices de la tabla `puntuacion_comentario`
--
ALTER TABLE `puntuacion_comentario`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `idComentario_2` (`idComentario`,`idUsuario`),
  ADD KEY `idComentario` (`idComentario`),
  ADD KEY `IdUsuario` (`idUsuario`);

--
-- Indices de la tabla `revista`
--
ALTER TABLE `revista`
  ADD PRIMARY KEY (`idRevista`),
  ADD UNIQUE KEY `nombre` (`nombre`),
  ADD KEY `idEditorial` (`idEditorial`);

--
-- Indices de la tabla `seguidores`
--
ALTER TABLE `seguidores`
  ADD PRIMARY KEY (`id`),
  ADD KEY `idUsuario` (`idUsuario`),
  ADD KEY `isSeguidor` (`idSeguidor`);

--
-- Indices de la tabla `usuario`
--
ALTER TABLE `usuario`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `username` (`username`),
  ADD UNIQUE KEY `email` (`email`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `actividad_usuario`
--
ALTER TABLE `actividad_usuario`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=54;

--
-- AUTO_INCREMENT de la tabla `amistades`
--
ALTER TABLE `amistades`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT de la tabla `autor`
--
ALTER TABLE `autor`
  MODIFY `idAutor` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=32;

--
-- AUTO_INCREMENT de la tabla `comentario`
--
ALTER TABLE `comentario`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=56;

--
-- AUTO_INCREMENT de la tabla `comentario_manga`
--
ALTER TABLE `comentario_manga`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT de la tabla `comentario_usuario`
--
ALTER TABLE `comentario_usuario`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT de la tabla `demografia`
--
ALTER TABLE `demografia`
  MODIFY `idDemografia` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT de la tabla `editorial`
--
ALTER TABLE `editorial`
  MODIFY `idEditorial` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;

--
-- AUTO_INCREMENT de la tabla `estado`
--
ALTER TABLE `estado`
  MODIFY `idEstado` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT de la tabla `estado_manga_usuario`
--
ALTER TABLE `estado_manga_usuario`
  MODIFY `idEstado` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT de la tabla `genero`
--
ALTER TABLE `genero`
  MODIFY `idGenero` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=32;

--
-- AUTO_INCREMENT de la tabla `manga`
--
ALTER TABLE `manga`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=28;

--
-- AUTO_INCREMENT de la tabla `manga_usuario`
--
ALTER TABLE `manga_usuario`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=31;

--
-- AUTO_INCREMENT de la tabla `puntuacion_comentario`
--
ALTER TABLE `puntuacion_comentario`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=41;

--
-- AUTO_INCREMENT de la tabla `revista`
--
ALTER TABLE `revista`
  MODIFY `idRevista` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=21;

--
-- AUTO_INCREMENT de la tabla `seguidores`
--
ALTER TABLE `seguidores`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `usuario`
--
ALTER TABLE `usuario`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=40;

--
-- Restricciones para tablas volcadas
--

--
-- Filtros para la tabla `actividad_usuario`
--
ALTER TABLE `actividad_usuario`
  ADD CONSTRAINT `actividad_usuario_ibfk_1` FOREIGN KEY (`idUsuario`) REFERENCES `usuario` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;

--
-- Filtros para la tabla `amistades`
--
ALTER TABLE `amistades`
  ADD CONSTRAINT `amistades_ibfk_1` FOREIGN KEY (`idUsuario`) REFERENCES `usuario` (`id`),
  ADD CONSTRAINT `amistades_ibfk_2` FOREIGN KEY (`idAmigo`) REFERENCES `usuario` (`id`);

--
-- Filtros para la tabla `comentario`
--
ALTER TABLE `comentario`
  ADD CONSTRAINT `comentario_ibfk_1` FOREIGN KEY (`idUsuario`) REFERENCES `usuario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `comentario_ibfk_2` FOREIGN KEY (`idPadre`) REFERENCES `comentario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `comentario_manga`
--
ALTER TABLE `comentario_manga`
  ADD CONSTRAINT `comentario_manga_ibfk_1` FOREIGN KEY (`idComentario`) REFERENCES `comentario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `comentario_manga_ibfk_2` FOREIGN KEY (`idManga`) REFERENCES `manga` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `comentario_usuario`
--
ALTER TABLE `comentario_usuario`
  ADD CONSTRAINT `comentario_usuario_ibfk_1` FOREIGN KEY (`idComentario`) REFERENCES `comentario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `comentario_usuario_ibfk_2` FOREIGN KEY (`idUsuario`) REFERENCES `usuario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `manga`
--
ALTER TABLE `manga`
  ADD CONSTRAINT `manga_ibfk_1` FOREIGN KEY (`idEstado`) REFERENCES `estado` (`idEstado`),
  ADD CONSTRAINT `manga_ibfk_2` FOREIGN KEY (`idDemografia`) REFERENCES `demografia` (`idDemografia`);

--
-- Filtros para la tabla `manga_autor`
--
ALTER TABLE `manga_autor`
  ADD CONSTRAINT `manga_autor_ibfk_1` FOREIGN KEY (`idManga`) REFERENCES `manga` (`id`),
  ADD CONSTRAINT `manga_autor_ibfk_2` FOREIGN KEY (`idAutor`) REFERENCES `autor` (`idAutor`);

--
-- Filtros para la tabla `manga_genero`
--
ALTER TABLE `manga_genero`
  ADD CONSTRAINT `manga_genero_ibfk_1` FOREIGN KEY (`idManga`) REFERENCES `manga` (`id`),
  ADD CONSTRAINT `manga_genero_ibfk_2` FOREIGN KEY (`idGenero`) REFERENCES `genero` (`idGenero`);

--
-- Filtros para la tabla `manga_revista`
--
ALTER TABLE `manga_revista`
  ADD CONSTRAINT `manga_revista_ibfk_1` FOREIGN KEY (`idManga`) REFERENCES `manga` (`id`),
  ADD CONSTRAINT `manga_revista_ibfk_2` FOREIGN KEY (`idRevista`) REFERENCES `revista` (`idRevista`);

--
-- Filtros para la tabla `manga_usuario`
--
ALTER TABLE `manga_usuario`
  ADD CONSTRAINT `manga_usuario_ibfk_1` FOREIGN KEY (`idManga`) REFERENCES `manga` (`id`),
  ADD CONSTRAINT `manga_usuario_ibfk_2` FOREIGN KEY (`idUsuario`) REFERENCES `usuario` (`id`),
  ADD CONSTRAINT `manga_usuario_ibfk_3` FOREIGN KEY (`idEstado`) REFERENCES `estado_manga_usuario` (`idEstado`);

--
-- Filtros para la tabla `puntuacion_comentario`
--
ALTER TABLE `puntuacion_comentario`
  ADD CONSTRAINT `puntuacion_comentario_ibfk_1` FOREIGN KEY (`idComentario`) REFERENCES `comentario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `puntuacion_comentario_ibfk_2` FOREIGN KEY (`IdUsuario`) REFERENCES `usuario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `puntuacion_comentario_ibfk_3` FOREIGN KEY (`idUsuario`) REFERENCES `usuario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `revista`
--
ALTER TABLE `revista`
  ADD CONSTRAINT `revista_ibfk_1` FOREIGN KEY (`idEditorial`) REFERENCES `editorial` (`idEditorial`);

--
-- Filtros para la tabla `seguidores`
--
ALTER TABLE `seguidores`
  ADD CONSTRAINT `seguidores_ibfk_1` FOREIGN KEY (`idUsuario`) REFERENCES `usuario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `seguidores_ibfk_2` FOREIGN KEY (`idSeguidor`) REFERENCES `usuario` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
